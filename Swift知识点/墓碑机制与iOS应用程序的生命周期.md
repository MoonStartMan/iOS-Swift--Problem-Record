# 墓碑机制与iOS应用程序的生命周期

## 应用程序的状态

IOS应用程序一共有5种状态

+ Not running: 应用未运行
+ Inactive: 应用运行在foreground且正在接收事件
+ Active: 应用运行在foreground且正在接收事件
+ Background: 运行在background且正在执行代码
+ Suspended: 运行在background但没有执行代码

## 墓碑机制

墓碑机制(Tombstone)也就是常说的[伪多任务],是手机操作系统中的一个程序运行规则。

当上一个任务被迫中断时，如按下Home键至主界面的瞬间，系统会记录下应用程序的状态，随后程序被冻结起来(完全挂起)，就像把事件记录在墓碑上一样。

当需要恢复时，根据墓碑上的内容，将程序恢复到中断之前的状态。

这样的一种机制就是墓碑机制，墓碑机制常见于移动设备这种内存或电能资源有限的平台。

在此机制之上，苹果也开放了一个后台接口，允许应用在进入后台之后继续运行10分钟，无论亮屏还是息屏休眠都是10分钟，时间一到立马挂起。

墓碑式后台，在关闭程序保存现场，下次启动时还原，给人一种后台的假象。